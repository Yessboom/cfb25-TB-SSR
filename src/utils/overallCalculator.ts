import { Player } from "../types";

export const RTAttributes = {
    "init": -30.138500029367037,
    "SPD": 0.016080595685693116,
    "AGI": 0.04727382394411089,
    "STR": 0.15539067709951568,
    "AWR": 0.12493548366058368,
    "PBK": 0.09585061406180072,
    "PBP": 0.24350684583123192,
    "PBF": 0.182616584137414,
    "RBK": 0.16094482010353126,
    "RBP": 0.0900820486891656,
    "RBF": 0.0775291820454641,
    "LBK": 0.03982628115918016,
    "IBL": 0.10301203425504142
}

export const FSAttributes = {
    "init": -61.50244955835737,
    "SPD": 0.20522847301492309,
    "ACC": 0.1985785722911553,
    "AGI": 0.05995838287569589,
    "COD": 0.09409268972031608,
    "STR": 0.0528081783428687,
    "AWR": 0.25364453902038814,
    "PRC": 0.1303874958951501,
    "TAK": 0.2267174565400351,
    "BSH": 0.018297472087221815,
    "PUR": 0.12223144266900078,
    "MCV": 0.10868610595567332,
    "ZCV": 0.2218773761900679,
    "PRS": 0.0087172940364114,
    "CTH": 0.0011624795375032582,
    "JMP": 0.037116444016631014,
    "IBL": 0.01910287520105893
}

export const REAttributes = {
    "init": -41.79653350020308,
    "SPD": 0.27995870551704344,
    "ACC": 0.08790421682532149,
    "AGI": 0.04337690792470951,
    "STR": 0.1530300713228942,
    "AWR": 0.16267761655669954,
    "PRC": 0.07673995169075426,
    "TAK": 0.26872253041406285,
    "BSH": 0.09597551090072035,
    "PMV": 0.08048552122715076,
    "FMV": 0.1388475667170965,
    "PUR": 0.1050513899566681,
    "CTH": 0.02505868338081195,
    "IBL": 0.0013897006718735457
}

export const LOLBAttributes = {
    "init": -70.18657232791675,
    "SPD": 0.12506833403751588,
    "ACC": 0.3055680741420817,
    "STR": 0.09387625583182957,
    "AWR": 0.1812010418790767,
    "PRC": 0.18904591529338222,
    "TAK": 0.20115823002620037,
    "BSH": 0.0896595070907786,
    "PMV": 0.07451735655613384,
    "PUR": 0.3285114175276533,
    "MCV": 0.02710127672690743,
    "ZCV": 0.19422853316080532,
    "PRS": 0.0014831920593151304,
    "JMP": 0.03447906001361198
}

export const WRAttributes = {
    "init": -75.53131262712907,
    "SPD": 0.1974219703187859,
    "ACC": 0.18213104258898777,
    "AGI": 0.15539458375471799,
    "COD": 0.08823017596401973,
    "AWR": 0.1629740078557786,
    "CTH": 0.22404062666975103,
    "CIT": 0.14464828471439017,
    "SPC": 0.10871010508484608,
    "SRR": 0.02195508879942067,
    "MRR": 0.11482239848664864,
    "DRR": 0.21434703885288153,
    "RLS": 0.16361341556028625,
    "CAR": 0.015130691752712791,
    "BCV": 0.002831360146958642,
    "BTK": 0.017799190069022506,
    "SFA": 0.004118928714347315,
    "SPM": 0.007757948522749433,
    "JKM": 0.005621232745398316
}

export const DTAttributes = {
    "init": -60.12067175096102,
    "SPD": 0.045729289288579625,
    "ACC": 0.13889005706136853,
    "AGI": 0.058141044443633834,
    "STR": 0.3396190371595955,
    "AWR": 0.10773799143090437,
    "PRC": 0.1533387735968687,
    "TAK": 0.27092958238927844,
    "POW": 0.031072620501419353,
    "BSH": 0.24255160033688672,
    "PMV": 0.14459564504910954,
    "FMV": 0.013342510151152898,
    "PUR": 0.1468564910991999,
    "IBL": 0.008687664224964208
}

export const ROLBAttributes = {
    "init": -59.59144839109267,
    "SPD": 0.11548641379144103,
    "ACC": 0.15246007662048697,
    "AGI": 0.030468941627494653,
    "COD": 0.08745605070076484,
    "STR": 0.08633837896894217,
    "AWR": 0.18851689030890934,
    "PRC": 0.13459864229655571,
    "TAK": 0.25407611304606104,
    "BSH": 0.06214360782201195,
    "PMV": 0.0481837120813866,
    "PUR": 0.2934630023145939,
    "MCV": 0.05771311270116458,
    "ZCV": 0.15596139167719286,
    "PRS": 0.021828647288667347,
    "JMP": 0.02083052745560631,
    "IBL": 0.022401782071813127
}

export const TEAttributes = {
    "init": -69.99980117444441,
    "SPD": 0.08108117814056505,
    "AGI": 0.15468243130881476,
    "STR": 0.05104851489920417,
    "AWR": 0.19537907958286094,
    "CTH": 0.1975529062674226,
    "CIT": 0.1329076206122661,
    "SPC": 0.09926056320916748,
    "SRR": 0.12669126382213206,
    "MRR": 0.15774367838593983,
    "DRR": 0.027585412245857678,
    "RLS": 0.03092547199369929,
    "JMP": 0.04718215180528969,
    "CAR": 0.02060158850434099,
    "BCV": 0.051475860246619175,
    "BTK": 0.07149474498040508,
    "SFA": 0.055110587060202644,
    "SPM": 0.02722118748638082,
    "PBK": 0.006044531976789173,
    "PBP": 0.03747317139821718,
    "PBF": 0.04432403438329721,
    "RBK": 0.1551327957136294,
    "RBP": 0.08065057514150459,
    "RBF": 0.11002036208393948,
    "LBK": 0.04454976243807764,
    "IBL": 0.021987016376364216
}

export const MLBAttributes = {
    "init": -77.89143682423726,
    "SPD": 0.1312314821708611,
    "ACC": 0.2623137242961737,
    "AGI": 0.008765621028585663,
    "COD": 0.06724750427768156,
    "STR": 0.11658664677271088,
    "AWR": 0.16312988552176133,
    "PRC": 0.15164720438889198,
    "TAK": 0.28917180851880814,
    "BSH": 0.07768665769559999,
    "PUR": 0.3051170900454919,
    "MCV": 0.08452697265991385,
    "ZCV": 0.24138241723411802,
    "PRS": 0.00582603847547658,
    "JMP": 0.03236159592930171,
    "IBL": 0.007251982323320361
}

export const CBAttributes = {
    "init": -69.4497723188727,
    "SPD": 0.3322170519047038,
    "ACC": 0.29719399464576646,
    "AGI": 0.064557995322848,
    "COD": 0.10812928151767984,
    "STR": 0.00788749706394825,
    "AWR": 0.1770605388056013,
    "PRC": 0.1162178139996364,
    "TAK": 0.1006546983033148,
    "FMV": 0.001032161684770383,
    "PUR": 0.014302138384555546,
    "MCV": 0.2751801775034466,
    "ZCV": 0.1271738285961503,
    "PRS": 0.0916155123216942,
    "CTH": 0.021906145221174955,
    "JMP": 0.05278557978956119,
    "IBL": 0.0019308520292948134
}

export const RGAttributes = {
    "init": -38.257931693181376,
    "ACC": 0.046735423853013255,
    "AGI": 0.023373950475803623,
    "COD": 0.011394208104688571,
    "STR": 0.21794912314580311,
    "AWR": 0.15370552654800734,
    "PBK": 0.20015303096129855,
    "PBP": 0.19192768694900092,
    "PBF": 0.1116959971066266,
    "RBK": 0.14321140537156338,
    "RBP": 0.10248434188694953,
    "RBF": 0.07595367497235855,
    "LBK": 0.0764858373662554,
    "IBL": 0.09029737390564097
}

export const LEAttributes = {
    "init": -39.6378778985393,
    "SPD": 0.22725271295786148,
    "ACC": 0.10309053150680905,
    "STR": 0.11435942173102344,
    "AWR": 0.17130503737220695,
    "PRC": 0.06345020785129236,
    "TAK": 0.26436500002011637,
    "BSH": 0.05726863401565649,
    "PMV": 0.17804897384056714,
    "FMV": 0.1091989297066472,
    "PUR": 0.10895077057916833,
    "CTH": 0.024311977134409635,
    "JMP": 0.02318935561202127,
    "IBL": 0.04477693935129194
}

export const HBAttributes = {
    "init": -102.80711173808187,
    "SPD": 0.31006202325685384,
    "ACC": 0.18725973132713866,
    "AGI": 0.25730470607738626,
    "COD": 0.047208035183654656,
    "STR": 0.05337553202905702,
    "AWR": 0.28735137532607014,
    "CAR": 0.22110444944235472,
    "BCV": 0.18351256774227478,
    "BTK": 0.21674456121761715,
    "SPM": 0.16301340643086853,
    "JKM": 0.14501516744019588,
    "SRR": 0.0481713055704682,
    "RLS": 0.00836046507214161,
    "IBL": 0.012269887408385867,
    "RET": 0.03015148750593058
}

export const QBAttributes = {
    "init": -89.74360422239971,
    "SPD": 0.16160149263002707,
    "AGI": 0.011088094558711459,
    "AWR": 0.23032536144780338,
    "THP": 0.4978393130283434,
    "SAC": 0.38248885149339534,
    "MAC": 0.29078053687797717,
    "DAC": 0.08609797487990546,
    "RUN": 0.030292456923837332,
    "TUP": 0.16927177041703076,
    "BSK": 0.07732086406539873,
    "PAC": 0.029069516804004054,
    "CAR": 0.022041043280610226
}

export const CAttributes = {
    "init": -48.18586156014479,
    "ACC": 0.05301886376648882,
    "AGI": 0.07188314587082102,
    "STR": 0.13775445254189778,
    "AWR": 0.2420181015419146,
    "PBK": 0.13850290845390428,
    "PBP": 0.19091105181606624,
    "PBF": 0.22616971427100174,
    "RBK": 0.16466957941302035,
    "RBP": 0.05444365765585712,
    "RBF": 0.09928653360361814,
    "LBK": 0.026671856838074985,
    "IBL": 0.16743804795130873
}

export const PAttributes = {
    "init": -9.991248914306297,
    "KPW": 0.4109419858271913,
    "KAC": 0.251640791039055,
    "AWR": 0.44010743680060493
}

export const LGAttributes = {
    "init": -44.95275116702318,
    "SPD": 0.010935429053593257,
    "ACC": 0.025956752172394543,
    "AGI": 0.08536041523823934,
    "STR": 0.22010634159455256,
    "AWR": 0.16528586893359645,
    "PBK": 0.13234783406614878,
    "PBP": 0.2062069797738695,
    "PBF": 0.1561434584880353,
    "RBK": 0.13723750824974593,
    "RBP": 0.1283386472392307,
    "RBF": 0.058221084500342614,
    "LBK": 0.07289276335919179,
    "IBL": 0.13562304906362446
}

export const KAttributes = {
    "init": -14.41919706935866,
    "KPW": 0.4045420996231911,
    "KAC": 0.2992609252858104,
    "AWR": 0.4453832537483801
}

export const LTAttributes = {
    "init": -34.93785122219151,
    "SPD": 0.026089812291966497,
    "AGI": 0.08037719569558609,
    "COD": 0.0203550674318396,
    "STR": 0.15106112029595015,
    "AWR": 0.11319681348881225,
    "PBK": 0.03062841911587741,
    "PBP": 0.30208020586868856,
    "PBF": 0.2286492785037036,
    "RBK": 0.20380622439483367,
    "RBP": 0.07578883103491495,
    "RBF": 0.08038665590303776,
    "IBL": 0.10001734563230842
}

export const SSAttributes = {
    "init": -65.9835116426708,
    "SPD": 0.26842538620596396,
    "ACC": 0.14646250563751465,
    "AGI": 0.14361859354646325,
    "COD": 0.03498425803803552,
    "STR": 0.0634435468640736,
    "AWR": 0.2502869042942259,
    "PRC": 0.14112540625416362,
    "TAK": 0.2472361043504956,
    "POW": 0.0262639212745351,
    "BSH": 0.0013627163773434726,
    "PMV": 0.006233122168530857,
    "PUR": 0.0985465580732485,
    "MCV": 0.08203252643712564,
    "ZCV": 0.2475021364506591,
    "CTH": 0.0023351721759020546,
    "JMP": 0.04268466624647382,
    "IBL": 0.006577497204291462
}

export const FBAttributes = {
    "init": -61.00330004307082,
    "SPD": 0.15012562148461603,
    "ACC": 0.24062275618987689,
    "STR": 0.2957613692900766,
    "AWR": 0.17030828678895604,
    "CAR": 0.22869454331785044,
    "BCV": 0.022899244515567074,
    "SRR": 0.19899291431919047,
    "PBK": 0.11886887195388525,
    "LBK": 0.19239783625432408,
    "IBL": 0.26575274446489894
}

const positionToWeights: Record<string, Record<string, number>> = {
    "0": QBAttributes,  // QB
    "1": HBAttributes,  // HB
    "2": FBAttributes,  // FB
    "3": WRAttributes,  // WR
    "4": TEAttributes,  // TE
    "5": LTAttributes,  // LT
    "6": LGAttributes,  // LG
    "7": CAttributes,   // C
    "8": RGAttributes,  // RG
    "9": RTAttributes,  // RT
    "10": LEAttributes, // LE
    "11": REAttributes, // RE
    "12": DTAttributes, // DT
    "13": LOLBAttributes, // LOLB
    "14": MLBAttributes,  // MLB
    "15": ROLBAttributes, // ROLB
    "16": CBAttributes,   // CB
    "17": FSAttributes,   // FS
    "18": SSAttributes,   // SS
    "19": KAttributes,    // K
    "20": PAttributes     // P
  };
  
const attributeMap = {
    'SPD': 'speed',
    'ACC': 'acceleration',
    'AGI': 'agility',
    'COD': 'changeOfDirection',
    'STR': 'strength',
    'AWR': 'awareness',
    'CTH': 'catching',
    'CAR': 'carrying',
    'THP': 'throwPower',
    'SAC': 'throwAccuracyShort',
    'MAC': 'throwAccuracyMid',
    'DAC': 'throwAccuracyDeep',
    'RUN': 'throwOnTheRun',
    'TUP': 'throwUnderPressure',
    'BSK': 'breakSack',
    'PAC': 'playAction',
    'BCV': 'backfieldVision',
    'BTK': 'breakTackle',
    'TRK': 'trucking',
    'SFA': 'stiffArm',
    'SPM': 'spinMove',
    'JKM': 'jukeMove',
    'PBK': 'passBlock',
    'PBP': 'passBlockPower',
    'PBF': 'passBlockFinesse',
    'RBK': 'runBlock',
    'RBP': 'runBlockPower',
    'RBF': 'runBlockFinesse',
    'LBK': 'leadBlock',
    'IBL': 'impactBlocking',
    'PRC': 'playRecognition',
    'TAK': 'tackle',
    'POW': 'hitPower',
    'BSH': 'blockShedding',
    'PMV': 'powerMoves',
    'FMV': 'finesseMoves',
    'PUR': 'pursuit',
    'MCV': 'manCoverage',
    'ZCV': 'zoneCoverage',
    'PRS': 'press',
    'CIT': 'catchInTraffic',
    'SPC': 'spectacularCatch',
    'SRR': 'shortRouteRun',
    'MRR': 'mediumRouteRun',
    'DRR': 'deepRouteRun',
    'RLS': 'release',
    'JMP': 'jumping',
    'KPW': 'kickPower',
    'KAC': 'kickAccuracy',
    'RET': 'kickReturn'
};

export const getOverall = (player: Player): number => {
    const position = player.position;
    const weights = positionToWeights[position];
    if (!weights) {
        return 0; // or handle error
    }

    let overall = weights.init;

    // Create attributes object from player properties
    const attributes: Record<string, number> = {};
    for (const [plyrKey, playerKey] of Object.entries(attributeMap)) {
        const value = (player as any)[playerKey];
        if (value !== undefined) {
            attributes[plyrKey] = value;
        }
    }

    for (const [attribute, value] of Object.entries(attributes)) {
        const weight = weights[attribute];
        if (weight !== undefined) {
            overall += weight * value;
        }
    }

    return Math.round(overall);
};